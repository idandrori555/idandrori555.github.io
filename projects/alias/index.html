<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:;base64,=">
  <title>Alias - The Digital Game</title>
  <!-- 注转 Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 专转 驻 Inter  转转 住住转 -Tailwind -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          animation: {
            'celebrate': 'celebrate 1.5s ease-out infinite',
          },
          keyframes: {
            celebrate: {
              '0%, 100%': {
                transform: 'scale(1)',
                filter: 'drop-shadow(0 0 5px rgba(251, 191, 36, 0.5))'
              },
              '50%': {
                transform: 'scale(1.03)',
                filter: 'drop-shadow(0 0 15px rgba(251, 191, 36, 0.9))'
              },
            }
          }
        }
      }
    }
  </script>
  <style>
    /* 专转  拽 转爪转 驻 */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0d121c;
      /*   转专 - -驻专 注拽 */
      text-align: right;
      transition: background-color 0.5s ease;
    }

    .game-container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
    }

    /* 转 砖专  */
    @media (max-width: 640px) {
      .main-word {
        font-size: 3.5rem;
        /* 转  专转  */
      }
    }

    /* Hide arrows from number inputs */
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type=number] {
      -moz-appearance: textfield;
    }

    /* 砖驻专 注 爪 驻转专 */
    button {
      transition: all 0.2s ease-in-out;
    }

    /* --- 爪转 砖 拽 --- */

    @keyframes scoreUp {
      0% {
        transform: scale(1);
        opacity: 0.8;
      }

      50% {
        transform: scale(1.15);
        opacity: 1;
        color: #4ade80;
        /* Tailwind green-400 */
        text-shadow: 0 0 10px rgba(74, 222, 128, 0.7);
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes scoreDown {
      0% {
        transform: translate(0);
        opacity: 0.8;
      }

      25% {
        transform: translate(-5px, 0) scale(0.95);
        color: #f87171;
        /* Tailwind red-400 */
        text-shadow: 0 0 8px rgba(248, 113, 113, 0.7);
      }

      75% {
        transform: translate(5px, 0) scale(0.95);
      }

      100% {
        transform: translate(0);
        opacity: 1;
      }
    }

    .score-up {
      animation: scoreUp 0.5s ease-out;
    }

    .score-down {
      animation: scoreDown 0.5s ease-out;
    }
  </style>
</head>

<body class="bg-gray-950 text-gray-200">
  <div id="app" class="game-container">
    <!-- 转 驻拽爪 注  -->
  </div>

  <script src="hebrew_words.js"></script>
  <script>
    // 专转 专专转  砖 住
    const DEFAULT_ROUND_DURATION = 60;

    // 爪 砖拽
    const GAME_STATE = {
      SETUP: 'SETUP',
      BOARD: 'BOARD',
      ROUND: 'ROUND',
      SUMMARY: 'SUMMARY',
      GAME_OVER: 'GAME_OVER',
      MANAGE_SETS: 'MANAGE_SETS'
    };

    // 爪 砖拽 
    let gameState = {
      currentScreen: GAME_STATE.SETUP,
      teams: [],
      currentTeamIndex: 0,
      winningScore: 70, // 拽 爪 住 爪 砖拽
      roundDuration: DEFAULT_ROUND_DURATION, // 砖 住 专
      currentRound: {
        presenterIndex: 0,
        score: 0,
        timeLeft: DEFAULT_ROUND_DURATION,
        currentWord: '',
      },
      timerInterval: null,
      // totalWords  转 专砖转  砖注  注砖  砖砖 砖拽 .
      totalWords: [...HEBREW_WORDS],
      // 砖 注专转  驻注
      activeWordSet: '专专转 ',
    };

    // ---  注专转  -LocalStorage ---

    const CUSTOM_SETS_STORAGE_KEY = 'aliasCustomWordSets';

    // 拽转  注专转 转转 砖转 住
    function getCustomWordSets() {
      try {
        const sets = localStorage.getItem(CUSTOM_SETS_STORAGE_KEY);
        return sets ? JSON.parse(sets) : {};
      } catch (e) {
        console.error("Error reading custom word sets from localStorage", e);
        return {};
      }
    }

    // 砖专转  注专转 转转 砖转 住
    function saveCustomWordSets(sets) {
      try {
        localStorage.setItem(CUSTOM_SETS_STORAGE_KEY, JSON.stringify(sets));
      } catch (e) {
        console.error("Error saving custom word sets to localStorage", e);
      }
    }


    // --- 拽转 转 转 拽 ---

    // 转 驻拽爪 爪转 住 专转
    function initApp() {
      gameState.currentScreen = GAME_STATE.SETUP;
      render();
    }

    // 驻住  砖 爪 砖拽
    function resetGame() {
      //  砖 专 专抓, 注爪专 转
      if (gameState.timerInterval) clearInterval(gameState.timerInterval);

      // 驻住 爪 转 砖专 注 注专 专 砖专 (拽 砖 住)
      gameState = {
        currentScreen: GAME_STATE.SETUP,
        teams: [],
        currentTeamIndex: 0,
        // 砖专 注 注专 砖专 专  专专转 
        winningScore: gameState.winningScore || 70,
        roundDuration: gameState.roundDuration || DEFAULT_ROUND_DURATION,
        currentRound: {
          presenterIndex: 0,
          score: 0,
          // 转 砖 注 砖 住 
          timeLeft: gameState.roundDuration || DEFAULT_ROUND_DURATION,
          currentWord: '',
        },
        timerInterval: null,
        totalWords: [...HEBREW_WORDS],
      };

      // 注专 住 专转
      render();
    }

    // --- 拽转 专转 砖拽 (SETUP) ---

    // 转 转转 砖拽
    function startSetup() {
      const teamNames = document.getElementById('teamNames');
      const winningScoreInput = document.getElementById('winningScore');
      const roundDurationInput = document.getElementById('roundDuration');
      const setupErrorElement = document.getElementById('setupError');
      const wordSetSelect = document.getElementById('wordSet');

      const selectedWordSet = wordSetSelect.value;
      let wordsForGame = [];

      if (selectedWordSet === '专专转 ') {
        wordsForGame = [...HEBREW_WORDS];
      } else {
        const customSets = getCustomWordSets();
        wordsForGame = [...(customSets[selectedWordSet] || [])];
      }

      if (wordsForGame.length === 0) {
        setupErrorElement.style.display = 'block';
        setupErrorElement.textContent = "注专转  砖专 专拽.  专 注专 专转  住祝 .";
        return;
      }

      const namesArray = teamNames.value.split('\n').map(name => name.trim()).filter(name => name);
      const teamCount = namesArray.length;
      const scoreToWin = parseInt(winningScoreInput.value, 10);
      const duration = parseInt(roundDurationInput.value, 10);

      // 转 住住
      if (teamCount < 2) {
        setupErrorElement.style.display = 'block';
        setupErrorElement.textContent = "  驻转 2 砖转 砖 拽爪转 (转 砖专).";
        return;
      }
      if (scoreToWin < 1 || isNaN(scoreToWin)) {
        setupErrorElement.style.display = 'block';
        setupErrorElement.textContent = "拽 爪  转 住驻专 .";
        return;
      }
      if (duration < 10 || isNaN(duration)) {
        setupErrorElement.style.display = 'block';
        setupErrorElement.textContent = "砖 住  转 驻转 10 砖转.";
        return;
      }

      setupErrorElement.textContent = "";

      gameState.winningScore = scoreToWin;
      gameState.roundDuration = duration;
      gameState.activeWordSet = selectedWordSet;
      gameState.totalWords = wordsForGame;

      // 爪专转 注专 拽爪转
      gameState.teams = [];
      for (let i = 0; i < teamCount; i++) {
        gameState.teams.push({
          name: namesArray[i],
          score: 0,
          players: [`砖拽 1`, `砖拽 2`],
          presenterIndex: 0
        });
      }

      gameState.currentScreen = GAME_STATE.BOARD;
      render();
    }

    // --- 拽转  砖拽 (BOARD) ---

    // 驻注转 住 砖
    function startNewRound() {
      if (gameState.teams.length === 0) return;

      // 转 转 住
      gameState.currentRound.score = 0;
      // 砖砖 砖 住 专
      gameState.currentRound.timeLeft = gameState.roundDuration;
      gameState.currentWord = '';

      // 专转 砖拽 爪 
      const currentTeam = gameState.teams[gameState.currentTeamIndex];
      const nextPresenterIndex = currentTeam.presenterIndex;
      currentTeam.presenterIndex = (currentTeam.presenterIndex + 1) % currentTeam.players.length;

      gameState.currentScreen = GAME_STATE.ROUND;
      getNewWord();
      startTimer();
      render();
    }

    // --- 拽转 住 (ROUND) ---

    // 专转  砖
    function getNewWord() {
      // 1.  专  , 驻住 转 专 (转转 "砖拽 砖" 砖 )
      if (gameState.totalWords.length === 0) {
        // 拽专 砖 专 拽,  驻住  驻砖专 砖 砖拽
        console.warn("Word pool exhausted. Resetting word list to master list.");
        gameState.totalWords = [...HEBREW_WORDS];
      }

      // 2. 专转  拽专转 专 砖转专
      const randomIndex = Math.floor(Math.random() * gameState.totalWords.length);
      const newWord = gameState.totalWords[randomIndex];

      // 3. 专转  转
      gameState.currentRound.currentWord = newWord;

      // 4. 住专转  专   注 砖砖 专 砖拽 
      gameState.totalWords.splice(randomIndex, 1);

      // 5. 注 转爪
      if (gameState.currentScreen === GAME_STATE.ROUND) {
        const wordElement = document.getElementById('currentWordDisplay');
        if (wordElement) {
          wordElement.textContent = newWord;
        }
      }
    }

    // 驻注转 砖注 注爪专
    function startTimer() {
      if (gameState.timerInterval) clearInterval(gameState.timerInterval);

      gameState.timerInterval = setInterval(() => {
        gameState.currentRound.timeLeft--;
        const timerElement = document.getElementById('timerDisplay');
        if (timerElement) {
          timerElement.textContent = gameState.currentRound.timeLeft;

          // 拽 砖 爪注  砖 专
          if (gameState.currentRound.timeLeft <= 10) {
            timerElement.classList.add('text-red-400', 'animate-pulse');
            timerElement.classList.remove('text-indigo-400', 'text-gray-200');
          } else {
            timerElement.classList.remove('text-red-400', 'animate-pulse');
            timerElement.classList.add('text-indigo-400');
          }
        }

        if (gameState.currentRound.timeLeft <= 0) {
          clearInterval(gameState.timerInterval);
          endRound();
        }
      }, 1000);
    }

    // 注 拽  住
    function handleGuess(type) {
      const currentTeam = gameState.teams[gameState.currentTeamIndex];
      const roundScoreElement = document.getElementById('roundScoreDisplay');

      if (type === 'success') {
        gameState.currentRound.score++;
        currentTeam.score++; // 注  砖 拽  转拽转 

        // 驻注转 爪转 爪
        if (roundScoreElement) {
          roundScoreElement.classList.remove('score-down', 'text-red-400', 'text-green-400');
          roundScoreElement.classList.add('score-up', 'text-green-400');
          setTimeout(() => {
            roundScoreElement.classList.remove('score-up');
            // 注 爪注 专 专 爪,  砖专 注   拽 砖
            if (gameState.currentRound.score < 0) {
              roundScoreElement.classList.add('text-red-400');
            } else {
              roundScoreElement.classList.add('text-green-400');
            }
          }, 500); // 砖 爪
        }

        getNewWord();
      } else if (type === 'skip') {
        //   驻住 驻转 拽 ( 拽 砖)
        gameState.currentRound.score--;
        currentTeam.score--;

        // 驻注转 爪转 砖
        if (roundScoreElement) {
          roundScoreElement.classList.remove('score-up', 'text-green-400', 'text-red-400');
          roundScoreElement.classList.add('score-down', 'text-red-400');
          setTimeout(() => {
            roundScoreElement.classList.remove('score-down');
            // 注 爪注 专 专 爪
            if (gameState.currentRound.score < 0) {
              roundScoreElement.classList.add('text-red-400');
            } else {
              roundScoreElement.classList.add('text-green-400');
            }
          }, 500); // 砖 爪
        }

        getNewWord();
      }

      // 注 转爪转 拽 住 ( 驻 拽转 爪/注 )
      if (roundScoreElement) {
        roundScoreElement.textContent = gameState.currentRound.score;
      }


      // 拽转 爪  ( 拽 注专 转 专祝 爪)
      if (currentTeam.score >= gameState.winningScore) {
        clearInterval(gameState.timerInterval);
        gameState.currentScreen = GAME_STATE.GAME_OVER;
        render();
        return;
      }

      // 注 转爪转  专拽注
      renderBoard();
    }

    // 住 住
    function endRound() {
      if (gameState.timerInterval) clearInterval(gameState.timerInterval);

      // 拽转 爪
      const currentTeam = gameState.teams[gameState.currentTeamIndex];
      // 拽转 爪  砖转 - 注 爪专 注专 转 拽 爪 ()
      if (currentTeam.score >= gameState.winningScore) {
        gameState.currentScreen = GAME_STATE.GAME_OVER;
      } else {
        gameState.currentScreen = GAME_STATE.SUMMARY;
      }
      render();
    }

    // --- 拽转 住 住 (SUMMARY) 祝 转专 ---

    // 注专转 转专 拽爪 
    function nextTurn() {
      //  砖 专拽 拽爪 转 ( 专 拽专转  转)  砖注 住祝, 专 转
      gameState.currentTeamIndex = (gameState.currentTeamIndex + 1) % gameState.teams.length;
      gameState.currentScreen = GAME_STATE.BOARD;
      render();
    }

    // --- 驻拽爪转 专专 (Rendering) ---

    function getCurrentTeam() {
      return gameState.teams[gameState.currentTeamIndex];
    }

    // 注专 住  注专转
    function showManageSetsScreen() {
      gameState.currentScreen = GAME_STATE.MANAGE_SETS;
      render();
    }

    // 砖专  注 砖 注专
    function saveOrUpdateSet() {
      const setNameInput = document.getElementById('setName');
      const wordsTextarea = document.getElementById('wordsTextarea');
      const setName = setNameInput.value.trim();
      const words = wordsTextarea.value.split('\n').map(w => w.trim()).filter(Boolean);

      if (!setName || words.length === 0) {
        alert('砖 住驻拽 砖 注专 驻转  转.');
        return;
      }

      const customSets = getCustomWordSets();
      customSets[setName] = words;
      saveCustomWordSets(customSets);

      // 专 住 专转
      gameState.currentScreen = GAME_STATE.SETUP;
      render();
    }

    // 拽转 注专
    function deleteSet(setName) {
      if (!confirm(` 转  砖专爪 拽 转 注专 "${setName}"?`)) {
        return;
      }

      const customSets = getCustomWordSets();
      delete customSets[setName];
      saveCustomWordSets(customSets);

      // 砖专 转 住 专专 砖
      render();
    }

    // 注转 注专 注专
    function loadSetForEditing(setName) {
      const customSets = getCustomWordSets();
      const words = customSets[setName];

      if (words) {
        document.getElementById('setName').value = setName;
        document.getElementById('wordsTextarea').value = words.join('\n');
      }
    }

    // 专专  砖拽 (转 拽)
    function renderBoard() {
      const boardContainer = document.getElementById('boardContainer');
      if (!boardContainer) return;

      const boardHTML = `
                <div class="space-y-4">
                    ${gameState.teams.map((team, index) => {
        // 拽注转 爪注 拽: 爪 爪,  砖,  拽 专
        const scoreTextColor = team.score >= gameState.winningScore
          ? 'text-yellow-400'
          : (team.score < 0 ? 'text-red-400' : 'text-blue-400');

        return `
                        <div class="flex items-center justify-between p-5 rounded-xl shadow-xl transition duration-300 ${index === gameState.currentTeamIndex ? 'bg-indigo-900/50 border-4 border-indigo-400 transform scale-[1.02] shadow-indigo-500/50' : 'bg-gray-800 border border-gray-700 hover:bg-gray-700/50'}">
                            <div class="flex flex-col">
                                <span class="text-xl font-bold ${index === gameState.currentTeamIndex ? 'text-indigo-300' : 'text-gray-300'}">${team.name}</span>
                                <span class="text-sm text-gray-400 mt-1">爪 : ${team.players[team.presenterIndex]}</span>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-4xl font-extrabold ${scoreTextColor}">${team.score}</span>
                            </div>
                        </div>
                      `;
      }).join('')}
                </div>
            `;
      boardContainer.innerHTML = boardHTML;
    }


    // 专专 转 爪 砖拽
    function render() {
      const appDiv = document.getElementById('app');
      let content = '';

      const currentTeam = getCurrentTeam();
      const nextPresenterName = currentTeam ? currentTeam.players[currentTeam.presenterIndex] : '';

      switch (gameState.currentScreen) {
        case GAME_STATE.SETUP:
          const customSets = getCustomWordSets();
          const setNames = Object.keys(customSets);

          content = `
                        <div class="w-full max-w-lg p-8 bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl mt-10">
                            <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 mb-8 text-center border-b border-gray-700 pb-3">
                                住
                            </h1>
                            
                            <div class="space-y-6">
                                <!-- 专转 注专转  -->
                                <div class="mb-4">
                                    <label for="wordSet" class="block text-sm font-medium text-gray-300 mb-2">专 注专转 :</label>
                                    <div class="flex gap-2">
                                        <select id="wordSet" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 shadow-inner text-white">
                                            <option value="专专转 ">专专转  (注专转)</option>
                                            ${setNames.map(name => `<option value="${name}" ${gameState.activeWordSet === name ? 'selected' : ''}>${name}</option>`).join('')}
                                        </select>
                                        <button onclick="showManageSetsScreen()" class="p-3 bg-gray-600 text-white rounded-xl hover:bg-gray-500 transition duration-200" title=" 注专转 ">锔</button>
                                    </div>
                                </div>

                                <!-- 拽 专砖 爪 -->
                                <div class="mb-4">
                                    <label for="winningScore" class="block text-sm font-medium text-gray-300 mb-2">拽 专砖 爪:</label>
                                    <input type="number" id="winningScore" value="${gameState.winningScore}" min="1" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 shadow-inner text-white" aria-label="拽 专砖 爪">
                                </div>
                                
                                <!-- 砖 住 -->
                                <div class="mb-4">
                                    <label for="roundDuration" class="block text-sm font-medium text-gray-300 mb-2">砖 住 (砖转):</label>
                                    <input type="number" id="roundDuration" value="${gameState.roundDuration}" min="10" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 shadow-inner text-white" aria-label="砖 住 砖转">
                                </div>

                                <!-- 砖转 拽爪转 -->
                                <div class="mb-6">
                                    <label for="teamNames" class="block text-sm font-medium text-gray-300 mb-2">砖转 拽爪转 ( 砖   砖专):</label>
                                    <textarea id="teamNames" rows="4" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 shadow-inner text-white placeholder-gray-400" placeholder="拽爪转 驻转专\n拽爪转 专" aria-label="砖转 拽爪转"></textarea>
                                </div>
                            </div>

                            <p id="setupError" class="text-red-400 text-sm font-semibold mb-6 text-center bg-red-900/30 p-2 rounded-lg hidden"></p>
                            
                            <button onclick="startSetup()" class="w-full py-4 my-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-2xl shadow-lg hover:from-indigo-700 hover:to-purple-700 transition duration-300 transform hover:scale-[1.01] active:scale-[0.98] ring-2 ring-indigo-400">
                                转 砖拽
                            </button>
                        </div>
                    `;
          break;

        case GAME_STATE.MANAGE_SETS:
          const existingSets = getCustomWordSets();
          content = `
            <div class="w-full max-w-lg p-8 bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl mt-10">
              <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-cyan-400 mb-6 text-center border-b border-gray-700 pb-3">
                 注专转 
              </h1>

              <!-- 专砖转 注专转 拽转 -->
              <div class="mb-6">
                <h2 class="text-xl font-bold text-gray-300 mb-3">注专转 砖</h2>
                <div class="space-y-2">
                  ${Object.keys(existingSets).length > 0 ? Object.keys(existingSets).map(setName => `
                    <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                      <span class="font-semibold text-white">${setName}</span>
                      <div class="flex gap-2">
                        <button onclick="loadSetForEditing('${setName}')" class="text-sm bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded-md transition">注专</button>
                        <button onclick="deleteSet('${setName}')" class="text-sm bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded-md transition">拽</button>
                      </div>
                    </div>
                  `).join('') : '<p class="text-gray-400 text-center">注  爪专转 注专转 .</p>'}
                </div>
              </div>

              <!-- 驻住 爪专/注专 -->
              <div class="space-y-4 pt-4 border-t border-gray-700">
                <h2 class="text-xl font-bold text-gray-300">爪专 / 注专转 注专</h2>
                <div>
                  <label for="setName" class="block text-sm font-medium text-gray-300 mb-2">砖 注专:</label>
                  <input type="text" id="setName" class="w-full p-3 bg-gray-900 border border-gray-600 rounded-xl focus:ring-teal-500 focus:border-teal-500 text-white" placeholder=": 住专 住专转">
                </div>
                <div>
                  <label for="wordsTextarea" class="block text-sm font-medium text-gray-300 mb-2">专砖转  (转  砖专):</label>
                  <textarea id="wordsTextarea" rows="6" class="w-full p-3 bg-gray-900 border border-gray-600 rounded-xl focus:ring-teal-500 focus:border-teal-500 text-white" placeholder="专 驻专\n砖专 注转\n..."></textarea>
                </div>
                <button onclick="saveOrUpdateSet()" class="w-full py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold rounded-xl shadow-lg hover:from-teal-600 hover:to-cyan-600 transition">
                  砖专 注专
                </button>
              </div>
              
              <button onclick="initApp()" class="w-full mt-6 py-2 bg-gray-600 text-gray-200 font-semibold rounded-xl hover:bg-gray-500 transition">
                专 住 专砖
              </button>
            </div>
          `;
          break;

        case GAME_STATE.BOARD:
          content = `
                        <div class="w-full max-w-lg p-8 bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl mt-10">
                            <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-cyan-400 mb-6 text-center">  砖拽 </h1>
                            
                            <div class="bg-indigo-900 p-5 rounded-2xl mb-8 border-l-8 border-indigo-400 shadow-xl shadow-indigo-900/50">
                                <p class="text-md text-indigo-300 font-medium">转专 :</p>
                                <p class="text-3xl font-black text-indigo-200">${currentTeam.name}</p>
                                <p class="text-md text-gray-300 mt-2">爪 : <span class="font-semibold text-white">${currentTeam.players[currentTeam.presenterIndex]}</span></p>
                            </div>

                            <h2 class="text-xl font-bold text-gray-300 mb-4 border-b border-gray-700 pb-2">拽 (注: ${gameState.winningScore})</h2>
                            <div id="boardContainer" class="mb-8">
                                <!--  注 爪注转 renderBoard() -->
                            </div>
                            
                            <button onclick="startNewRound()" class="w-full py-4 bg-gradient-to-r from-emerald-500 to-green-500 text-white font-extrabold rounded-2xl shadow-xl hover:from-emerald-600 hover:to-green-600 transition duration-300 transform hover:scale-[1.02] active:scale-[0.98] ring-4 ring-emerald-300/50">
                                 转 住 砖 (砖: ${gameState.roundDuration} 砖转)
                            </button>
                        </div>
                    `;
          break;

        case GAME_STATE.ROUND:
          content = `
                        <div class="w-full max-w-lg p-6 bg-gray-900 border border-gray-700 rounded-3xl shadow-2xl mt-10 text-center">
                            <h1 class="text-2xl font-extrabold text-indigo-400 mb-4">转专 砖: ${currentTeam.name}</h1>
                            
                            <div class="grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-800 rounded-2xl shadow-inner border border-gray-700">
                                <div class="p-2 border-l border-gray-700">
                                    <p class="text-base font-medium text-gray-400"> 砖转专:</p>
                                    <p id="timerDisplay" class="text-6xl font-black text-indigo-400 transition-colors duration-200">${gameState.currentRound.timeLeft}</p>
                                </div>
                                <div class="p-2">
                                    <p class="text-base font-medium text-gray-400">拽 住:</p>
                                    <p id="roundScoreDisplay" class="text-6xl font-black ${gameState.currentRound.score < 0 ? 'text-red-400' : 'text-green-400'}">${gameState.currentRound.score}</p>
                                </div>
                            </div>
                            
                            <div class="my-8 p-10 bg-gradient-to-br from-indigo-700 to-purple-700 text-white rounded-3xl shadow-2xl transform hover:scale-105 transition duration-300 cursor-pointer shadow-indigo-500/50">
                                <p class="text-xl font-medium opacity-80 mb-2"> 住专:</p>
                                <p id="currentWordDisplay" class="main-word text-6xl md:text-8xl font-black tracking-wider">${gameState.currentRound.currentWord}</p>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="handleGuess('success')" class="py-6 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-extrabold text-2xl rounded-2xl shadow-2xl hover:from-green-600 hover:to-emerald-600 transition duration-300 transform hover:scale-[1.05] active:scale-[1] ring-2 ring-green-300/50">
                                    爪
                                </button>
                                <button onclick="handleGuess('skip')" class="py-6 bg-gradient-to-r from-red-500 to-pink-500 text-white font-extrabold text-2xl rounded-2xl shadow-2xl hover:from-red-600 hover:to-pink-600 transition duration-300 transform hover:scale-[1.05] active:scale-[1] ring-2 ring-red-300/50">
                                     / 驻住
                                </button>
                            </div>

                            <button onclick="endRound()" class="w-full mt-6 py-3 bg-gray-700 text-gray-300 font-bold rounded-2xl hover:bg-gray-600 transition duration-300 shadow-md transform hover:scale-[1.01] active:scale-[0.99]">
                                住 住 拽
                            </button>
                        </div>
                    `;
          break;

        case GAME_STATE.SUMMARY:
          content = `
                        <div class="w-full max-w-lg p-8 bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl mt-10 text-center">
                            <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400 mb-6 border-b border-gray-700 pb-2"> 住 住!</h1>
                            
                            <div class="bg-gray-700 p-8 rounded-2xl mb-8 shadow-xl border-t-4 ${gameState.currentRound.score < 0 ? 'border-red-500' : 'border-green-500'}">
                                <p class="text-xl text-gray-300 mb-3">拽爪 砖砖拽: <span class="font-black text-indigo-400">${currentTeam.name}</span></p>
                                <p class="text-2xl font-bold text-gray-300 mb-4">拽 砖住祝 住:</p>
                                <p class="text-8xl font-black ${gameState.currentRound.score < 0 ? 'text-red-400' : 'text-green-400'}">${gameState.currentRound.score}</p>
                            </div>

                            <h2 class="text-xl font-bold text-gray-300 mb-4 border-b border-gray-700 pb-2">转拽转 </h2>
                            <div id="boardContainer" class="mb-8">
                                <!--  注 爪注转 renderBoard() -->
                            </div>

                            <button onclick="nextTurn()" class="w-full py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold rounded-2xl shadow-xl hover:from-blue-700 hover:to-cyan-700 transition duration-300 transform hover:scale-[1.01] active:scale-[0.98]">
                                 注专 转专 拽爪 
                            </button>
                        </div>
                    `;
          break;

        case GAME_STATE.GAME_OVER:
          content = `
                        <div class="w-full max-w-lg p-8 bg-gray-900 rounded-3xl shadow-2xl mt-10 text-center border-4 border-yellow-500 animate-celebrate">
                            <h1 class="text-7xl font-black text-yellow-400 mb-4 drop-shadow-lg"> 爪!!! </h1>
                            <p class="text-3xl font-extrabold text-indigo-400 mb-6 border-b border-gray-700 pb-3">${getCurrentTeam().name} 爪 砖拽!</p>
                            
                            <div class="bg-gray-700 p-6 rounded-2xl mb-6 shadow-inner border border-yellow-800">
                                <p class="text-2xl text-gray-300">拽 住驻:</p>
                                <p class="text-6xl font-black text-yellow-400">${getCurrentTeam().score}</p>
                            </div>

                            <!-- 爪 转拽 拽专 驻拽爪转 resetGame() -->
                            <button onclick="resetGame()" class="w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-2xl shadow-xl hover:from-indigo-700 hover:to-purple-700 transition duration-300 transform hover:scale-[1.01] active:scale-[0.98]">
                                 转 砖拽 砖
                            </button>
                        </div>
                    `;
          break;
      }

      appDiv.innerHTML = content;
      if (gameState.currentScreen === GAME_STATE.BOARD || gameState.currentScreen === GAME_STATE.SUMMARY) {
        renderBoard();
      }
    }

    // 驻注转 驻拽爪 专 注转 祝
    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>

</html>
